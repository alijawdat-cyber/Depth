# ๐ ุงูุฏููู ุงูุดุงูู - ูุธุงู ุงููุตุงุฏูุฉ ูุชุฏูู ุงููุณุชุฎุฏููู | Depth Agency

**ุชุงุฑูุฎ ุงูุฅุนุฏุงุฏ:** 16 ููุงูุฑ 2025  
**ุงูุฅุตุฏุงุฑ:** 1.0 ุงููุฏูุฌ  
**ุงููุทุงู:** depth-agency.com  
**ุงูุญุงูุฉ:** โ ุฏููู ุดุงูู ููุญุฏุซ

---

## ๐ ุงูููุฎุต ุงูุชูููุฐู

ูุฐุง ุงูุฏููู ุงูุดุงูู ูุบุทู **ูุธุงู ุงููุตุงุฏูุฉ ุงููุฒุฏูุฌ** (Email + Google OAuth) ู**ุชุญููู ุชุฏูู ุงูุงุณุชุฎุฏุงู ุงููุงูู** ูุจูุงุจุฉ ุงูุนููุงุก ูู Depth Agency. ุงููุธุงู ูุจูู ุนูู NextAuth.js ูุน Firebase ููุงุนุฏุฉ ุจูุงูุงุชุ ููููุฑ ุชุฌุฑุจุฉ ุขููุฉ ููุฑูุฉ ููุนููุงุก.

### ุงููุชูุฌุฉ ุงูุนุงูุฉ: โ๏ธ ูุญุชุงุฌ ุชุญุณูู (ุชูุญูุฏ ุงููุตุฏุฑ: ุงูููุฏ)
- โ **Email Authentication (Resend):** ุงูููุฑุณู ุงูุฃุณุงุณู ููุฅูุชุงุฌ (SMTP ุงุฎุชูุงุฑู)
- โ๏ธ **Google OAuth:** ูุญุชุงุฌ ุฅููุงู ุฅุนุฏุงุฏ ุงูุฅูุชุงุฌ (Authorized domains/URIs)
- โ **Firebase Integration:** ูุชูุงูู
- โ **API Routes:** ูุชุตูุฉ ุฌูุฏุงู
- โ๏ธ **Environment Config:** ุชุญุฏูุซ ููู ุงูุฅูุชุงุฌ ุงููุทููุจุฉ
- โ๏ธ **User Flow:** ูุฌูุงุช ุทูููุฉ

---

## ๐ง ุงูุฌุฒุก ุงูุฃูู: ุชุญููู ูุธุงู ุงููุตุงุฏูุฉ

### **ุชุญููู ูููุงุช ุงูุจูุฆุฉ (SSOT ูุฎุชุตุฑ):**

#### **ุงูุชุทููุฑ (.env.local):**
```yaml
Firebase Project: depth-portal-production โ
- API Key: ุญูููู โ
- Auth Domain: depth-portal-production.firebaseapp.com โ
- Project ID: depth-portal-production โ

NextAuth Config:
- URL: http://localhost:3000 โ
- Secret: ููุนุฏ โ

Google OAuth:
- Client ID/Secret: ููู ุฅูุชุงุฌ ุญููููุฉ ูุทููุจุฉ โ๏ธ

Email Provider:
- Resend ูู ุงููุฒููุฏ ุงูุฃุณุงุณู ููุฅูุชุงุฌ โ
- SMTP (ุงุฎุชูุงุฑู ููุท)
```

### **ุชุญููู Firebase Integration:**

#### **ููุชุทููุฑ:**
```yaml
Project: depth-portal-production
Status: ููุนุฏ ุจุดูู ูุงูู โ
Features:
- Authentication: ููุนู โ
- Firestore: ููุนุฏ ูุน ููุงุนุฏ ุงูุฃูุงู โ
- Storage: ููุนุฏ โ
- Admin SDK: ููุนุฏ ูุน Service Account โ
```

#### **ููุงุนุฏ ุงูุฃูุงู (Firestore Rules):**
```javascript
// ููุนุฏุฉ ุจุดูู ููุชุงุฒ โ
- ุญูุงูุฉ ุจูุงูุงุช ุงููุณุชุฎุฏููู
- ุนุฒู ุงููุดุงุฑูุน ุญุณุจ ุงูุนููู
- ุงูุชุญูู ูู ุงููุตูู ูููููุงุช ูุงูููุงููุงุช
- ุตูุงุญูุงุช ุฎุงุตุฉ ููุฅุฏุงุฑุฉ (admin@depth-agency.com)
```

### **ุชุญููู ูุณุงุฑุงุช API:**

#### **NextAuth API:**
```yaml
/api/auth/[...nextauth]:
- File: route.ts โ
- Handler: NextAuth(authOptions) โ
- Methods: GET, POST โ

Generated Routes:
- /api/auth/signin โ
- /api/auth/signout โ
- /api/auth/callback/google โ
- /api/auth/callback/email โ
- /api/auth/session โ
- /api/auth/csrf โ
- /api/auth/providers โ
```

#### **Portal API:**
```yaml
/api/portal/clients:
- Methods: GET, POST, PUT โ
- Functionality: ุงูุชุณุฌููุ ุฌูุจ ุงูุจูุงูุงุชุ ุงูุชุญุฏูุซ โ
- Security: Session validation โ
- Database: Firestore integration โ

/api/portal/projects:
- Client-specific data โ
- Authentication required โ

/api/portal/files:
- File management โ
- Access control โ

/api/portal/approvals:
- Approval workflow โ
- Status management โ
```

---

## ๐ ุงูุฌุฒุก ุงูุซุงูู: ุชุฏูู ุงูุงุณุชุฎุฏุงู ุงููุงูู

### **ุงููุณุงุฑ ุงููุงูู ููุนููู:**
```
ุฒุงุฆุฑ ุฌุฏูุฏ โ ูุณุชูุดู ุงููููุน โ ููุฑุฑ ุงูุชุนุงูู โ ูุณุฌู ุญุณุงุจ โ ููุชุธุฑ ุงูููุงููุฉ โ ูุชูุนู ุงูุญุณุงุจ โ ูุณุชุฎุฏู ุงูุจูุงุจุฉ โ ูุชุงุจุน ูุดุงุฑูุนู
```

### **ุงูุฎุทูุฉ 1: ุฏุฎูู ุงููููุน ุงูุฑุฆูุณู**
**ุงูุฑุงุจุท:** https://depth-agency.com

**ูุง ูุดููู ุงูุนููู:**
```
โ Header ูุน:
- Logo Depth Agency
- ุฑูุงุจุท ุงูุชููู (ุงูุฎุทุทุ ุงูุฎุฏูุงุชุ ุงูุฃุนูุงูุ ูู ูุญูุ ุงููุฏููุฉุ ุชูุงุตูุ ุจูุงุจุฉ ุงูุนููู)
- ุฒุฑ "ุงุญุฌุฒ ุฌูุณุฉ"

โ Hero Section ูุน:
- ุนููุงู: "ูุญุชูู ูุญุฑูู ุงููุชุงุฆุฌ"
- ูุตู ูุฎุชุตุฑ ุนู ุงูููุงูุฉ
- ุซูุงุซุฉ ุฃุฒุฑุงุฑ:
  1. "ุงุญุฌุฒ ุฌูุณุฉ" (WhatsApp)
  2. "ุงุทูุจ ุนุฑุถ" (ููุฒู ููุจุงูุงุช)
  3. "ุงูุถู ูุนููู" (ูุฑูุญ ููุชุณุฌูู)
```

### **ุงูุฎุทูุฉ 2: ุงูุชุณุฌูู ูุนููู ุฌุฏูุฏ**
**ุงูุฑุงุจุท:** /portal/auth/signup

**ูุง ูุดููู ุงูุนููู:**
```
โ ูููุฐุฌ ุงูุชุณุฌูู:
- ุงูุงุณู ุงููุงูู (ูุทููุจ)
- ุงุณู ุงูุดุฑูุฉ/ุงููุดุฑูุน (ูุทููุจ) 
- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ูุทููุจ)
- ุฑูู ุงููุงุชู (ูุทููุจ)
- ุฒุฑ "ุฅูุดุงุก ุงูุญุณุงุจ"

โ ุฎูุงุฑ ุจุฏูู:
- "ุฃู"
- ุฒุฑ "ุงูุชุณุฌูู ุจู Google"

โ ุฑูุงุจุท ูุณุงุนุฏุฉ:
- "ูุฏูู ุญุณุงุจ ุจุงููุนูุ ุณุฌู ุฏุฎููู"
```

### **ุงูุฎุทูุฉ 3: ุตูุญุฉ ูุฌุญ ุงูุชุณุฌูู**
**ุงูุฑุงุจุท:** /portal/auth/success

**ุงูุนูููุฉ ุงููุงููุฉ:**
```
โ ุฑุณุงูุฉ ูุฌุงุญ:
- ุฃููููุฉ โ ุฎุถุฑุงุก
- "๐ ุชู ุงูุชุณุฌูู ุจูุฌุงุญ!"
- "ูุฑุญุจุงู ุจู ูู ุนุงุฆูุฉ Depth Agency"

โ ุงูุฎุทูุงุช ุงููุงุฏูุฉ:
1. "๐ง ุชุญูู ูู ุจุฑูุฏู ุงูุฅููุชุฑููู"
2. "โณ ุงูุชุธุงุฑ ุงูููุงููุฉ" 
3. "๐ฅ ุจุฏุงูุฉ ุงููุดุฑูุน"
4. "โก๏ธ ุงููุตูู ููุจูุงุจุฉ"

โ Timeline:
- ุฎูุงู ุณุงุนุฉ: ุงุณุชูุงู ุทูุจู
- ุฎูุงู 24 ุณุงุนุฉ: ุชูุนูู ุงูุญุณุงุจ  
- ุฎูุงู 48 ุณุงุนุฉ: ุจุฏุงูุฉ ุงููุดุฑูุน
```

### **ุงูุฎุทูุฉ 4: ุชุณุฌูู ุงูุฏุฎูู**
**ุงูุฑุงุจุท:** /portal/auth/signin

**ุชุฏูู ุงููุตุงุฏูุฉ:**
```mermaid
graph TD
    A[ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู] --> B{ุงุฎุชูุงุฑ ุทุฑููุฉ}
    B -->|Google| C[Google OAuth]
    B -->|Email| D[Magic Link]
    C --> E[Google Consent]
    D --> F[ุฅุฑุณุงู ุฑุงุจุท]
    E --> G[NextAuth Callback]
    F --> G
    G --> H[ุฅูุดุงุก JWT Session]
    H --> I[ุงูุชูุฌูู ููุจูุงุจุฉ]
```

### **ุงูุฎุทูุฉ 5: ุงูุจูุงุจุฉ ุงูุฑุฆูุณูุฉ**
**ุงูุฑุงุจุท:** /portal

**ุญุงูุงุช ุงููุตูู:**
```
โ ุนููู ููุนู:
- ูุดูู Dashboard ูุงูู
- Projectsุ Filesุ Notifications
- Profile settings

โ๏ธ ุนููู ุบูุฑ ููุนู:
- ุตูุญุฉ "ุงูุชุธุงุฑ ุงูููุงููุฉ"
- ูุนูููุงุช ุงูุชูุงุตู
- Timeline ุงูุชูุนูู
```

---

## โ ุงูุฌุฒุก ุงูุซุงูุซ: ุงููุฌูุงุช ูุงููุดุงูู ุงููุญุฏุฏุฉ

### **1. ูุฌูุฉ ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ:**

#### **ุงููุดููุฉ:**
- ุฒุฑ "ุงูุถู ูุนููู" ูู Hero ููุตู ูุจุงุดุฑุฉ ูู `/portal/auth/signup`
- **ูุง ูู ุชูุถูุญ** ููุฒุงุฆุฑ ุดูู ููุงูุน ุงูุจูุงุจุฉ
- **ูุง ูู ุฎุทูุงุช ูุงุถุญุฉ** ุชููู ุงูุฒุงุฆุฑ ุดููู ูุณุชููุฏ

#### **ุงูุญู ุงููุทููุจ:**
```
ุตูุญุฉ ุชุนุฑูููุฉ ูุณุทูุฉ: /portal/about
ุชุดุฑุญ:
- ุดูู ูู ุจูุงุจุฉ ุงูุนูููุ
- ุดูู ุงูููุงูุนุ
- ุฃูุซูุฉ ููุฎุฏูุงุช
- ุดูุงุฏุงุช ุนููุงุก
- ุจุนุฏูู ุฒุฑ "ุงุจุฏุฃ ุงูุชุณุฌูู"
```

### **2. ูุฌูุฉ ูู Header Navigation:**

#### **ุงููุดููุฉ:**
- Header ูุง ูุญุชูู ุนูู ุฑุงุจุท "ุจูุงุจุฉ ุงูุนููู"
- ุงูุนููู ุงูุญุงูู **ูุง ูฺฏุฏุฑ ููุตู** ููุจูุงุจุฉ ูู Header

#### **ุงูุญู:**
```javascript
// ุฅุถุงูุฉ ูู Header.tsx:
{session ? (
  <Link href="/portal" className="portal-link">
    ๐ ุจูุงุจุชู
  </Link>
) : (
  <Link href="/portal/about" className="portal-link">
    ๐ ุจูุงุจุฉ ุงูุนููู
  </Link>
)}
```

### **3. ูุดุงูู Google OAuth:**

#### **ุงููุดููุฉ:**
- **OAuth Client ุบูุฑ ููุนุฏ ููุฅูุชุงุฌ**
- ุงุณุชุฎุฏุงู Demo credentials
- Authorized domains ุบูุฑ ูุถุจูุทุฉ

#### **ุงูุญู ุงูููุฑู:**
```bash
# 1. ุฅุนุฏุงุฏ OAuth Client
gcloud config set project gam-project-1o6tc
gcloud auth login admin@depth-agency.com

# 2. ุถุจุท Authorized URIs:
JavaScript origins:
- https://depth-agency.com
- http://localhost:3000

Redirect URIs:
- https://depth-agency.com/api/auth/callback/google
- http://localhost:3000/api/auth/callback/google
```

---

## ๐จ ุงูุฌุฒุก ุงูุฑุงุจุน: ุชุญููู ุตูุญุงุช ุงููุตุงุฏูุฉ

### **ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู (/portal/auth/signin):**
```yaml
Features:
- Google Sign-In Button โ
- Email Magic Link Form โ
- Error Handling โ
- Loading States โ
- Responsive Design โ

UX Elements:
- Clear CTA buttons โ
- Bilingual support (Arabic) โ
- Fallback to signup โ
- Support contact link โ

Integration:
- NextAuth signIn() โ
- Router navigation โ
- Error messaging โ
```

### **ุตูุญุฉ ุงูุชุณุฌูู (/portal/auth/signup):**
```yaml
Workflow:
1. ุฌูุน ุจูุงูุงุช ุงูุนููู (ุงุณูุ ุดุฑูุฉุ ุฅููููุ ูุงุชู) โ
2. ุฅูุดุงุก ุณุฌู ูู /api/portal/clients โ
3. ุฅุฑุณุงู Magic Link ุนุจุฑ NextAuth โ
4. ุงูุชูุฌูู ูุตูุญุฉ ุงููุฌุงุญ โ

Features:
- Form validation โ
- Google signup option โ
- Error handling โ
- Data persistence โ
```

---

## โ๏ธ ุงูุฌุฒุก ุงูุฎุงูุณ: ููุงุท ุชุญุชุงุฌ ูุนุงูุฌุฉ ููุฑูุฉ

### **ุนุงููุฉ ุงูุฃููููุฉ:**

1. **ุฅุนุฏุงุฏ Google OAuth ููุฅูุชุงุฌ:**
   - ุฅูุดุงุก OAuth Client ูู gam-project-1o6tc
   - ุชุญุฏูุซ .env.local ุจุงูููู ุงูุญููููุฉ
   - ุถุจุท Authorized domains

2. **ุฅุนุฏุงุฏ Email Provider:**
   - ุฅูุดุงุก App Password ุฃู OAuth2 ููุจุฑูุฏ
   - ุชุญุฏูุซ SMTP credentials

3. **ุฅุถุงูุฉ ุตูุญุฉ /portal/about:**
   - ุดุฑุญ ููุงูุน ุงูุจูุงุจุฉ
   - ุฃูุซูุฉ ุนููุงุก
   - ุฑุญูุฉ ุงูุนููู ุงููููุฐุฌูุฉ

### **ูุชูุณุทุฉ ุงูุฃููููุฉ:**

4. **ุชุญุฏูุซ Header Navigation:**
   - ุฅุถุงูุฉ ุฑุงุจุท "ุจูุงุจุฉ ุงูุนููู"
   - Logic ูุฎุชูู ููุนููุงุก ุงููุณุฌููู

5. **ุชุญุณูู Error Handling:**
   - ุตูุญุฉ ุฎุทุฃ ูุตุงุฏูุฉ (/portal/auth/error)
   - ุชุญุณูู ุฑุณุงุฆู ุงูุฎุทุฃ

### **ููุฎูุถุฉ ุงูุฃููููุฉ:**

6. **ุฅุถุงูุฉ ููุฒุงุช ุฃูุงู:**
   - Rate limiting ููุชุณุฌูู
   - Email verification ุฅุถุงููุฉ
   - 2FA ุงุฎุชูุงุฑูุฉ

---

## ๐๏ธ ุงูุฌุฒุก ุงูุณุงุฏุณ: ุฎุทูุงุช ุงูุชูููุฐ ุงููุฑุญููุฉ

### **ุงููุฑุญูุฉ 1: ุฅุตูุงุญ Google OAuth (ููู ูุงุญุฏ)**
```bash
# 1. ุฅุนุฏุงุฏ OAuth Client
gcloud config set project gam-project-1o6tc
gcloud auth login admin@depth-agency.com

# 2. ุฅูุดุงุก OAuth credentials via Console
# Google Cloud Console โ APIs & Services โ Credentials

# 3. ุชุญุฏูุซ .env.local
GOOGLE_CLIENT_ID=new-real-client-id
GOOGLE_CLIENT_SECRET=new-real-client-secret
```

### **ุงููุฑุญูุฉ 2: ุฅุนุฏุงุฏ Email Provider (ูุตู ููู)**
```bash
# 1. ุฅูุดุงุก App Password
# Google Account โ Security โ App passwords

# 2. ุชุญุฏูุซ .env.local
EMAIL_SERVER_USER=admin@depth-agency.com
EMAIL_SERVER_PASSWORD=app-specific-password
```

### **ุงููุฑุญูุฉ 3: ุฅุถุงูุฉ ุตูุญุฉ /portal/about (ููู ูุงุญุฏ)**
```typescript
// ุงููููุงุช ุงููุทููุจุฉ:
- /src/app/portal/about/page.tsx (ุตูุญุฉ ุงูุชุนุฑูู)
- ุชุญุฏูุซ Header.tsx (ุฑุงุจุท ุงูุจูุงุจุฉ)
- ุชุญุฏูุซ Hero section (ุฑุงุจุท ูุคูุช)
```

### **ุงููุฑุญูุฉ 4: ุงุฎุชุจุงุฑุงุช ุดุงููุฉ (ูุตู ููู)**
```bash
# 1. ุงุฎุชุจุงุฑ Google OAuth
curl -I "https://depth-agency.com/api/auth/signin/google"

# 2. ุงุฎุชุจุงุฑ Email Provider
# ุชุฌุฑุจุฉ Magic Link

# 3. ุงุฎุชุจุงุฑ ุชุฏูู ูุงูู
# ูู ุงูุชุณุฌูู ุฅูู ุฏุฎูู ุงูุจูุงุจุฉ
```

---

## ๐ ุงูุฌุฒุก ุงูุณุงุจุน: ูุคุดุฑุงุช ุงูุฃุฏุงุก

### **ุงูุญุงูุฉ ุงูุญุงููุฉ:**
```yaml
Google OAuth: 20% ุฌุงูุฒ
Email Auth: 80% ุฌุงูุฒ  
Firebase: 90% ุฌุงูุฒ
API Routes: 100% ุฌุงูุฒ
UI/UX: 70% ุฌุงูุฒ (ูุฌูุงุช ูู ุงูุชุฏูู)
Security: 85% ุฌุงูุฒ

ุงูุฅุฌูุงูู: 74% ุฌุงูุฒ
```

### **ุจุนุฏ ุงูุชุญุณููุงุช:**
```yaml
Google OAuth: 100% ุฌุงูุฒ
Email Auth: 100% ุฌุงูุฒ
Firebase: 100% ุฌุงูุฒ
API Routes: 100% ุฌุงูุฒ
UI/UX: 95% ุฌุงูุฒ
Security: 95% ุฌุงูุฒ

ุงูุฅุฌูุงูู: 98% ุฌุงูุฒ
```

---

## ๐ฏ ุงูุฌุฒุก ุงูุซุงูู: ุงูุชูุตูุงุช ุงูุงุณุชุฑุงุชูุฌูุฉ

### **ูุตูุฑุฉ ุงููุฏู (ุฃุณุจูุน):**
- ุฅููุงู ุฅุนุฏุงุฏ Google OAuth
- ุชูุนูู Email Provider
- ุฅุถุงูุฉ ุตูุญุฉ /portal/about
- ุชุญุฏูุซ Header navigation

### **ูุชูุณุทุฉ ุงููุฏู (ุดูุฑ):**
- ุฅุถุงูุฉ ูุฑุงูุจุฉ ูุชุญูููุงุช
- ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู
- ุฅุถุงูุฉ ููุฒุงุช ุฃูุงู ูุชูุฏูุฉ

### **ุทูููุฉ ุงููุฏู (3 ุฃุดูุฑ):**
- ุฏูุฌ ูุน ุฃูุธูุฉ CRM
- ุฅุถุงูุฉ SSO ููุดุฑูุงุช
- ุชุทููุฑ API ููุชูุงููุงุช ุงูุฎุงุฑุฌูุฉ

---

## ๐ ุงูููุงุฑุฏ ูุงููุฑุงุฌุน

### **ุงููุซุงุฆู ุงูุชูููุฉ:**
- [NextAuth.js Documentation](https://next-auth.js.org)
- [Firebase Auth Documentation](https://firebase.google.com/docs/auth)
- [Google Cloud OAuth2](https://developers.google.com/identity/protocols/oauth2)

### **ุฃุฏูุงุช ุงูุฅุฏุงุฑุฉ:**
- Google Workspace Admin Console
- Firebase Console  
- Google Cloud Console
- GAMADV-XTD3 ููุฅุฏุงุฑุฉ ุงููุชูุฏูุฉ

### **ูููุงุช ุงููุดุฑูุน:**
- `/src/lib/auth.ts` - ุฅุนุฏุงุฏุงุช NextAuth
- `/src/lib/firebase-admin.ts` - Firebase Admin SDK
- `/src/app/api/auth/[...nextauth]/route.ts` - NextAuth API
- `/src/app/portal/auth/` - ุตูุญุงุช ุงููุตุงุฏูุฉ

---

## ๐ ูุนูููุงุช ุงูุชูุงุตู ููุฏุนู ุงูุชููู

ููุญุตูู ุนูู ุงููุณุงุนุฏุฉ ูู ุชูููุฐ ุงูุชุญุณููุงุช:

๐ง **ุงูุฏุนู ุงูุชููู:** admin@depth-agency.com  
๐ฑ **WhatsApp:** +964 777 976 1547  
๐ **ุงููููุน:** https://depth-agency.com  
๐ **ุงููููุน:** ุจุบุฏุงุฏุ ุงูุนุฑุงู

---

**๐ ุขุฎุฑ ุชุญุฏูุซ:** 16 ููุงูุฑ 2025 - ูุฏูุฌ ููุญุณู โ  
**๐ค ุงููุญูู:** AI Assistant  
**๐ ุงูุญุงูุฉ:** ุฏููู ุดุงูู - ุฌุงูุฒ ููุชูููุฐ ูุงููุชุงุจุนุฉ โ

---

> **ููุงุญุธุฉ ูููุฉ:** ูุฐุง ุงูุฏููู ุงููุฏูุฌ ูุญุชูู ุนูู ูุนูููุงุช ุชูููุฉ ูุชุฌุฑูุจูุฉ ุดุงููุฉ. ุชู ุฏูุฌ ุซูุงุซุฉ ูููุงุช ูููุตูุฉ ูุน ุงูุญูุงุธ ุนูู ุฌููุน ุงููุนูููุงุช ุงููููุฉ ูุชูุธูููุง ูู ุฏููู ูุงุญุฏ ุณูู ุงููุชุงุจุนุฉ.
