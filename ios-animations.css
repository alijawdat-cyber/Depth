/* === iOS Safari Animations System === */

/* تفعيل GPU على iOS */
@supports (-webkit-touch-callout: none) {
    /* iOS Detection */
    
    /* GPU hint utility class for elements that need hardware acceleration */
    .gpu-hint {
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        -webkit-perspective: 1000;
        perspective: 1000;
    }
    
    /* حركات مخصصة لـ iOS */
    @keyframes iosSlideUp {
        from {
            opacity: 0;
            transform: translate3d(0, 30px, 0);
        }
        to {
            opacity: 1;
            transform: translate3d(0, 0, 0);
        }
    }
    
    @keyframes iosSlideRight {
        from {
            opacity: 0;
            transform: translate3d(-40px, 0, 0);
        }
        to {
            opacity: 1;
            transform: translate3d(0, 0, 0);
        }
    }
    
    @keyframes iosSlideLeft {
        from {
            opacity: 0;
            transform: translate3d(40px, 0, 0);
        }
        to {
            opacity: 1;
            transform: translate3d(0, 0, 0);
        }
    }
    
    @keyframes iosZoomIn {
        from {
            opacity: 0;
            transform: scale3d(0.9, 0.9, 1);
        }
        to {
            opacity: 1;
            transform: scale3d(1, 1, 1);
        }
    }
    
    @keyframes iosFlipIn {
        from {
            opacity: 0;
            transform: perspective(400px) rotate3d(0, 1, 0, 45deg);
        }
        to {
            opacity: 1;
            transform: perspective(400px) rotate3d(0, 1, 0, 0);
        }
    }
    
    @keyframes iosBounceIn {
        0% {
            opacity: 0;
            transform: scale3d(0.3, 0.3, 1);
        }
        50% {
            transform: scale3d(1.05, 1.05, 1);
        }
        100% {
            opacity: 1;
            transform: scale3d(1, 1, 1);
        }
    }
    
    /* Classes للحركات */
    .ios-animate-up {
        animation: iosSlideUp 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
    }
    
    .ios-animate-right {
        animation: iosSlideRight 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
    }
    
    .ios-animate-left {
        animation: iosSlideLeft 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
    }
    
    .ios-animate-zoom {
        animation: iosZoomIn 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
    }
    
    .ios-animate-flip {
        animation: iosFlipIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) both;
    }
    
    .ios-animate-bounce {
        animation: iosBounceIn 0.7s cubic-bezier(0.68, -0.55, 0.265, 1.55) both;
    }
    
    /* Delays تدريجية */
    .ios-delay-1 { animation-delay: 0.05s; }
    .ios-delay-2 { animation-delay: 0.1s; }
    .ios-delay-3 { animation-delay: 0.15s; }
    .ios-delay-4 { animation-delay: 0.2s; }
    .ios-delay-5 { animation-delay: 0.25s; }
}

/* Safe Areas لـ iPhone 16 Pro Max */
@supports (padding: max(0px)) {
    .doc-content {
        padding-left: max(16px, env(safe-area-inset-left));
        padding-right: max(16px, env(safe-area-inset-right));
    }
    
    /* حصر التأثير على السايدبار الرئيسي فقط لتجنب تعارض مع سايدبارات المعاينات */
    #sidebar {
        padding-bottom: max(20px, env(safe-area-inset-bottom));
    }
}

/* Spring Physics Animations */
@keyframes iosSpringIn {
    0% {
        opacity: 0;
        transform: scale3d(0.5, 0.5, 1);
    }
    40% {
        transform: scale3d(1.08, 1.08, 1);
    }
    60% {
        transform: scale3d(0.98, 0.98, 1);
    }
    80% {
        opacity: 1;
        transform: scale3d(1.02, 1.02, 1);
    }
    100% {
        transform: scale3d(1, 1, 1);
    }
}

@keyframes iosElasticIn {
    0% {
        opacity: 0;
        transform: scale3d(0, 0, 1) rotate3d(0, 0, 1, -180deg);
    }
    30% {
        transform: scale3d(1.25, 0.75, 1) rotate3d(0, 0, 1, -120deg);
    }
    60% {
        transform: scale3d(0.85, 1.15, 1) rotate3d(0, 0, 1, -60deg);
    }
    100% {
        opacity: 1;
        transform: scale3d(1, 1, 1) rotate3d(0, 0, 1, 0);
    }
}

/* تطبيق على العناصر المهمة */
.ios-spring {
    animation: iosSpringIn 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) both;
}

.ios-elastic {
    animation: iosElasticIn 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) both;
}
