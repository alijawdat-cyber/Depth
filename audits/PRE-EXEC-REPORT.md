# PRE-EXECUTION REPORT โ Depth Email System Audit (READ-ONLY)

> **ุงูุชุงุฑูุฎ:** 2025-01-17  
> **ุงููุทุงู:** depth-agency.com  
> **ุงููุฏู:** ุชุฏููู ุดุงูู ุจุฏูู ุชุนุฏููุงุช ูุนููุฉ  
> **ุงูุญุงูุฉ:** ููุชูู - ุจุงูุชุธุงุฑ ููุงููุฉ ุงููุงูู ููุชูููุฐ

---

## 1) ุญุงูุฉ Workspace ุงูุญุงููุฉ

### ุงููุณุชุฎุฏููู ูุงููุฌููุนุงุช
- **ุงููุณุชุฎุฏููู:** 1 (`admin@depth-agency.com`)
- **ุงููุฌููุนุงุช:** 9 ูุฌููุนุงุช ุจุฑูุฏ ูุดุทุฉ
- **ุงูุนุถููุฉ:** admin@ ูู ุงููุงูู/ุงููุฏูุฑ ูุฌููุน ุงููุฌููุนุงุช
- **ุงูุฃุนุถุงุก:** ูุฌููุนุฉ ูุงุญุฏุฉ ููู ูุฌููุนุฉ (admin@ ููุท)

### ุงููุฌููุนุงุช ุงูููุดุฃุฉ
- โ `hello@depth-agency.com` - ุงููุงุฌูุฉ ุงูุนุงูุฉ
- โ `sales@depth-agency.com` - ุงููุจูุนุงุช ูุงููุชุงุจุนุฉ  
- โ `support@depth-agency.com` - ุงูุฏุนู ุงูููู
- โ `press@depth-agency.com` - ุงูุฅุนูุงู ูุงูุนูุงูุงุช ุงูุนุงูุฉ
- โ `billing@depth-agency.com` - ูุญุงุณุจุฉ ููุฏููุนุงุช
- โ `invoices@depth-agency.com` - ููุงุชูุฑ
- โ `legal@depth-agency.com` - ุงูุดุคูู ุงููุงููููุฉ  
- โ `studio@depth-agency.com` - ุงูุฅูุชุงุฌ ุงูุฏุงุฎูู
- โ `jobs@depth-agency.com` - ุทูุจุงุช ุงูุชูุธูู

### ููุงุญุธุงุช ูููุฉ
โ๏ธ **ุชุญุชุงุฌ ุถุจุท:** ุฌููุน ุงููุฌููุนุงุช ุชุญุชุงุฌ ุชูุนูู Collaborative Inbox ููุนูู ุงูุชุดุงุฑูู  
โ๏ธ **ุณูุงุณุงุช ุงูุฑุฏ:** ุชุญุชุงุฌ ุถุจุท `replyTo` ูููุฌููุนุงุช ุงูุฏุงุฎููุฉ vs ุงูุฎุงุฑุฌูุฉ

---

## 2) ุญุงูุฉ DNS ูุฃูุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

### ุณุฌูุงุช DNS ุงูุญุงููุฉ
| ุงูุณุฌู | ุงูุญุงูุฉ | ุงููููุฉ |
|-------|---------|--------|
| **MX** | โ ุตุญูุญ | `1 smtp.google.com.` |
| **SPF** | โ ุตุญูุญ | `v=spf1 include:_spf.google.com ~all` |
| **DKIM** | โ ููุนูู | 2048-bit `google._domainkey` |
| **DMARC** | โ๏ธ ูุงุจู ููุชุญุณูู | `p=quarantine` |

### ุชูุตูุงุช DMARC
- **ุงูุญุงูุฉ ุงูุญุงููุฉ:** `p=quarantine` - ููุจููุฉ ููุจุฏุงูุฉ
- **ุงูููุชุฑุญ:** ูุฑุงูุจุฉ ุชูุงุฑูุฑ DMARC ููุฏุฉ ุฃุณุจูุนูู
- **ุงูุฎุทูุฉ ุงูุชุงููุฉ:** ุชุฑููุฉ ุฅูู `p=reject` ุนูุฏ ุงูุชุฃูุฏ ูู ูุธุงูุฉ ุงูุชุณููู

---

## 3) ุชุญููู ุงููููุน ูุงูููุฏ

### ููุงุท ุงูุฅุฑุณุงู ุงูุญุงููุฉ

#### 1. ูููุฐุฌ ุงูุชูุงุตู (`/api/contact`)
- **ุงูููู:** `depth-site/src/app/api/contact/route.ts`
- **ุงููุฑุณู:** `Depth <hello@depth-agency.com>`
- **ุงููุณุชูุจู:** 
  - `admin@depth-agency.com`
  - `hello@depth-agency.com`
- **ูุฒูุฏ ุงูุฅุฑุณุงู:** Resend
- **ุงููุดููุฉ:** ุฌููุน ุงูุฑุณุงุฆู ุชุฐูุจ ูููุณ ุงููุฌูุงุช

#### 2. ูููุฐุฌ ุงูุญุฌุฒ (`/book`)
- **ุงูููู:** `depth-site/src/components/pages/BookClient.tsx`
- **ุงูุญุงูุฉ:** ูููุฐุฌ front-end ููุท
- **ุงููุดููุฉ:** ูุง ููุฌุฏ ุฅุฑุณุงู ุจุฑูุฏ ูุนูู

### ูุญุต ุงูุตูุญุงุช
- โ **robots.txt:** ููุฌูุฏ ููุถุจูุท
- โ **sitemap.xml:** ูุนูู ุจุดูู ุตุญูุญ
- โ **ุตูุญุงุช ุฑุฆูุณูุฉ:** `/` `/about` `/contact` `/blog` ุชุนูู
- โ **ุงูููุงุฐุฌ:** ููุฌูุฏุฉ ูููู ุชุญุชุงุฌ ุชูุฌูู ุฐูู

---

## 4) ุฎุฑูุทุฉ ุงูุชูุฌูู (Current vs Proposed)

### ุงููุถุน ุงูุญุงูู
```
ุฌููุน ุงูููุงุฐุฌ โ admin@ + hello@
(ุจุฏูู ุชูููุฒ ุญุณุจ ููุน ุงูุงุณุชูุณุงุฑ)
```

### ุงูููุชุฑุญ
```
ุงุณุชูุณุงุฑุงุช ุงูุชุณุนูุฑ โ sales@depth-agency.com
ูุดุงูู ุชูููุฉ โ support@depth-agency.com  
ุทูุจุงุช ุงูุนูู โ jobs@depth-agency.com
ุงูุฅุนูุงู โ press@depth-agency.com
ุงูุชุฑุงุถู โ hello@depth-agency.com
ูุณุฎุฉ โ admin@depth-agency.com (ููุฌููุน)
```

### ุขููุฉ ุงูุชูุฌูู ุงูููุชุฑุญุฉ
1. **Dropdown selector** ูู ูููุฐุฌ ุงูุชูุงุตู
2. **ูุดู ุงููููุงุช ุงูููุชุงุญูุฉ** ููุชูุฌูู ุงูุฐูู
3. **CC ุฅูู admin@** ูุฌููุน ุงูุฑุณุงุฆู

---

## 5) ุงููุฎุงุทุฑ ูุฎุทุฉ ุงูุฑุฌูุน

### ูุฎุงุทุฑ ููุฎูุถุฉ
- ุชูุนูู Collaborative Inbox (ูุงุจู ููุฅูุบุงุก)
- ุถุจุท ุณูุงุณุงุช ุงูุฑุฏ ูููุฌููุนุงุช (ูุงุจู ููุชุฑุงุฌุน)

### ูุฎุงุทุฑ ูุชูุณุทุฉ  
- ุชุนุฏูู ูููุฐุฌ ุงูุชูุงุตู (ูุญุชุงุฌ ุงุฎุชุจุงุฑ ุฏููู)
- ุชุฑููุฉ DMARC ุฅูู `p=reject` (ูุฏ ูุคุซุฑ ุนูู ุงูุชุณููู)

### ุฎุทุฉ ุงูุฑุฌูุน ููู ุชุบููุฑ
1. **Collaborative Inbox:** `gam update group X settings enableCollaborativeInbox false`
2. **ุณูุงุณุงุช ุงูุฑุฏ:** ุฅุนุงุฏุฉ ุฅูู `REPLY_TO_SENDER` ููุฌููุน
3. **ูููุฐุฌ ุงูุชูุงุตู:** `git revert` ููููุฏ ุงูุณุงุจู
4. **DMARC:** ุฅุนุงุฏุฉ ุฅูู `p=quarantine` ูู ุญุงู ูุดุงูู ุงูุชุณููู

### ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ
- โ ุฌููุน ุฅุนุฏุงุฏุงุช ุงููุฌููุนุงุช ูุญููุธุฉ ูู `audits/preexec/group_*.txt`
- โ DNS records ููุซูุฉ ูู `audits/preexec.log`
- โ ููุฏ ุงููููุน ูู Git ูุน commit history

---

## 6) ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุจููุงููุฉ ุงููุงูู ููุท)

### Phase 1: ุฅุนุฏุงุฏุงุช Google Workspace (30 ุฏูููุฉ)
- [ ] ุชูุนูู Collaborative Inbox ูู hello@ ู support@
- [ ] ุถุจุท ุณูุงุณุงุช `replyTo` ูููุฌููุนุงุช ุงูุฏุงุฎููุฉ/ุงูุฎุงุฑุฌูุฉ
- [ ] ุงุฎุชุจุงุฑ ุงูุฅุฑุณุงู ูุงูุงุณุชูุจุงู

### Phase 2: ุชุทููุฑ ูููุฐุฌ ุงูุชูุงุตู (2-3 ุณุงุนุงุช)
- [ ] ุฅุถุงูุฉ dropdown ูููุน ุงูุงุณุชูุณุงุฑ
- [ ] ุชูููุฐ Router function ููุชูุฌูู ุงูุฐูู
- [ ] ุงุฎุชุจุงุฑ ุดุงูู ูdeploy

### Phase 3: ููุงูุจ ุงูุจุฑูุฏ ุงููุชูุฏูุฉ (1-2 ุณุงุนุงุช)
- [ ] ุชูุนูู auto-reply ูููุฌููุนุงุช ุงูุฑุฆูุณูุฉ
- [ ] ุฅุถุงูุฉ ุฑูู ูุงุชุณุงุจ ูู ุฌููุน ุงูููุงูุจ
- [ ] ุงุฎุชุจุงุฑ ุงูุชุฌุฑุจุฉ ูู end-to-end

### Phase 4: ูุฑุงูุจุฉ ูุชุญุณูู DMARC (ุฃุณุจูุนูู)
- [ ] ูุฑุงูุจุฉ ุชูุงุฑูุฑ DMARC ุนูู dmarc@depth-agency.com
- [ ] ุชุญููู ูุนุฏู ุงูุชุณููู ูุงูุฑูุถ
- [ ] ุชุฑููุฉ ุฅูู `p=reject` ุนูุฏ ุงูุชุฃูุฏ

---

## 7) ุงููููุงุช ูุงููุฎุฑุฌุงุช

### ุงููููุงุช ุงูููุดุฃุฉ ูู ูุฐุง ุงูุชุฏููู
```
audits/
โโโ preexec.log              - ุณุฌู ุงูุชุฏููู ุงููุงูู
โโโ preexec/
โ   โโโ users.tsv           - ูุงุฆูุฉ ุงููุณุชุฎุฏููู
โ   โโโ groups.tsv          - ูุงุฆูุฉ ุงููุฌููุนุงุช  
โ   โโโ group_members.tsv   - ุนุถููุงุช ุงููุฌููุนุงุช
โ   โโโ aliases.tsv         - ุงูุจุฑูุฏ ุงููุณุชุนุงุฑ
โ   โโโ group_*.txt         - ุฅุนุฏุงุฏุงุช ูู ูุฌููุนุฉ
โ   โโโ code_scan.txt       - ูุญุต ุงูููุฏ ููุจุฑูุฏ
โ   โโโ site_scan.txt       - ูุญุต ุงููููุน
โโโ MAPPING.json            - ุฎุฑูุทุฉ ุงูุชูุฌูู current/proposed
โโโ EMAIL_TEMPLATES_PREVIEW.md - ูุนุงููุฉ ููุงูุจ ุงูุจุฑูุฏ
โโโ PRE-EXEC-REPORT.md      - ูุฐุง ุงูุชูุฑูุฑ
โโโ READY-TO-APPLY.sh       - ุฃูุงูุฑ ุงูุชูููุฐ (ูุนููุฉ)
```

---

## 8) ุงูุฎูุงุตุฉ ูุงูุชูุตูุงุช

### โ ุงูููุงุท ุงูุฅูุฌุงุจูุฉ
- Domain verified ูGoogle Workspace ูุถุจูุท ุจุดูู ุตุญูุญ
- DNS records (MX/SPF/DKIM) ุชุนูู ุจููุงุกุฉ
- ุฌููุน ุงููุฌููุนุงุช ุงููุทููุจุฉ ููุดุฃุฉ ููุดุทุฉ
- ุงููููุน ูุงูู API ูุนููุงู ุจุฏูู ูุดุงูู

### โ๏ธ ุงูููุงุท ุงูุชู ุชุญุชุงุฌ ุชุญุณูู
- ุชูุฌูู ุงูุจุฑูุฏ ุงูุญุงูู ุบูุฑ ูุฎุตุต (ููู ูุฐูุจ ูููุณ ุงูููุงู)
- ุงููุฌููุนุงุช ุชุญุชุงุฌ Collaborative Inbox ููุนูู ุงูุชุดุงุฑูู
- ููุงุฐุฌ ุงููููุน ุชุญุชุงุฌ ุชูุฌูู ุฐูู
- DMARC ูุงุจู ููุชุฑููุฉ ูุญูุงูุฉ ุฃูุถู

### ๐ฏ ุงูุฃููููุงุช
1. **ุนุงุฌู:** ุชูุนูู Collaborative Inbox ูู hello@ ู support@
2. **ููู:** ุชุทููุฑ ุงูุชูุฌูู ุงูุฐูู ูู ูููุฐุฌ ุงูุชูุงุตู
3. **ูุณุชูุจูู:** ุชุฑููุฉ DMARC ูุฅุถุงูุฉ ููุงูุจ ุงูุจุฑูุฏ ุงููุชูุฏูุฉ

---

**โจ ุงููุชูุฌุฉ:** ุงููุธุงู ุฌุงูุฒ ููุชุฑููุฉุ ูุง ุชูุฌุฏ ูุดุงูู ุญุฑุฌุฉุ ูุงูุชุญุณููุงุช ุงูููุชุฑุญุฉ ุณุชุญุณู ูุซูุฑุงู ูู ุชุฌุฑุจุฉ ุงูุนููู ูููุงุกุฉ ุงููุฑูู.

**๐ ุงูุฎุทูุฉ ุงูุชุงููุฉ:** ูุฑุงุฌุนุฉ ูุฐุง ุงูุชูุฑูุฑ ูุน ุตุงุญุจ ุงููุดุฑูุน ูุงูููุงููุฉ ุนูู Phase 1 ููุจุฏุก.
