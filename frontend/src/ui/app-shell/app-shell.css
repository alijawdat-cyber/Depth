/* App Shell */

.app-shell { display: grid; /* شبكة */ grid-template-areas: "header header" "sidebar main"; /* مناطق */ grid-template-columns: var(--sidebar-width) 1fr; /* سايدبار+محتوى */ grid-template-rows: var(--header-height) 1fr; /* هيدر ثابت */ height: 100dvh; /* ارتفاع */ overflow: hidden; /* منع تمرير خارجي */ background-color: var(--color-bg-primary); /* خلفية */ }

.app-header { grid-area: header; /* منطقة */ display: flex; align-items: center; justify-content: space-between; /* توزيع */ padding: 0 var(--space-md); /* حشو جانبي */ background-color: var(--color-bg-secondary); /* خلفية */ border-bottom: 1px solid var(--color-border-primary); /* حد */ z-index: var(--z-fixed); height: var(--header-height); /* طبقة/ارتفاع */ }

.app-logo { height: var(--fs-lg); /* ارتفاع */ width: auto; /* عرض تلقائي */ display: block; /* بلوك */ }

[data-mantine-color-scheme="dark"] .app-header .app-logo { filter: brightness(0) invert(1); /* عكس ألوان الشعار بالداكن */ }

.app-sidebar { grid-area: sidebar; /* منطقة */ padding: var(--space-md) var(--space-md) var(--space-lg); /* حشو */ background-color: var(--color-bg-secondary); /* خلفية */ border-inline-end: 1px solid var(--color-border-primary); /* حد */ overflow-y: auto; /* تمرير */ scrollbar-width: thin; /* شريط رفيع */ }

.app-main { grid-area: main; /* منطقة */ padding: var(--space-lg); /* حشو */ background-color: var(--color-bg-primary); /* خلفية */ overflow-y: auto; /* تمرير */ min-height: 0; /* منع مشاكل */ }

/* موبايل */
@media (max-width: 640px) {
  .app-shell { grid-template-areas: "header" "main"; /* عمود واحد */ grid-template-columns: 1fr; /* عمود */ grid-template-rows: var(--header-height) 1fr; /* هيدر+محتوى */ height: 100dvh; overflow: hidden; }
  .app-shell .app-main { padding-inline: calc(var(--space-sm) + var(--space-xs)); /* حافة */ padding-block: var(--space-sm); /* عمودي */ min-height: calc(100dvh - var(--header-height)); /* طول */ width: 100%; /* عرض كامل */ overflow-x: hidden; /* بدون تمرير أفقي */ }
  .mobile-sidebar { padding: var(--space-sm) !important; /* حشو */ width: min( calc(var(--sidebar-width) - var(--space-xl)), calc(100vw - var(--space-lg)) ) !important; /* عرض متكيّف */ }
  .mobile-sidebar .mantine-NavLink-root { padding-block: var(--space-sm) !important; /* كثافة أقل */ }
  .app-main .mantine-Container-root { padding-inline: 0 !important; /* بدون حشو جانبي */ }
  .app-main .mantine-Container-root .mantine-Stack-root { gap: var(--space-sm) !important; /* فجوة */ }
  .app-main .mantine-Container-root .mantine-Group-root { gap: var(--space-sm) !important; /* فجوة */ }
  .app-main .mantine-Container-root .mantine-Divider-root { margin-block: var(--space-sm) !important; /* هامش */ }
  .app-main .mantine-Container-root .mantine-Card-root { padding: var(--space-md) !important; /* حشو */ }
  .app-main .mantine-Container-root .mantine-Card-root + .mantine-Alert-root { margin-top: var(--space-md) !important; /* تباعد */ }
  .mobile-sidebar .sidebar-inner { padding: var(--space-sm) !important; /* حشو */ }
  .app-sidebar .sidebar-inner { padding-inline: var(--space-md); /* جانبي */ padding-block: var(--space-sm); /* عمودي */ }
}

/* طبقات overlay للموبايل */
.mobile-overlay { position: fixed; /* ثابت */ top: var(--header-height); /* من أعلى */ inset-inline: 0; /* يمين/يسار */ bottom: 0; /* أسفل */ background: var(--overlay-scrim); /* تعتيم */ z-index: var(--z-fixed); /* طبقة */ }
.mobile-sidebar { position: fixed; /* ثابت */ top: var(--header-height); /* من أعلى */ inset-inline-start: 0; /* بداية */ width: var(--sidebar-width); /* عرض */ height: calc(100dvh - var(--header-height)); /* طول */ background-color: var(--color-bg-secondary); /* خلفية */ border-inline-start: 1px solid var(--color-border-primary); /* حد */ box-shadow: var(--shadow-lg); /* ظل */ }

/* Sidebar NavLink UX */
.app-sidebar .mantine-NavLink-root {
  padding-inline: 0 !important;
  padding-block: var(--space-md);
  text-align: right;
  border-radius: var(--radius-md);
  transition: background-color .15s ease, color .15s ease, box-shadow .15s ease;
}

.app-sidebar .mantine-NavLink-root:hover,
.app-sidebar .mantine-NavLink-root:focus-visible {
  background-color: color-mix(in oklab, var(--color-primary) 30%, var(--color-bg-secondary));
  padding-inline-start: var(--space-sm);
}

.app-sidebar .mantine-NavLink-root[aria-current="page"],
.app-sidebar .mantine-NavLink-root[data-active="true"] {
  background-color: color-mix(in oklab, var(--color-primary) 30%, var(--color-bg-secondary));
  box-shadow: var(--shadow-inset);
  padding-inline-start: var(--space-sm);
}

.app-sidebar .mantine-NavLink-body { flex: 1 1 auto; min-width: 0; }
.app-sidebar .mantine-NavLink-label { display: block; width: 100%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.app-sidebar .mantine-NavLink-section:first-child { margin-inline-end: var(--space-xs); }
.app-sidebar .mantine-NavLink-section:last-child { margin-inline-start: var(--space-sm); }
.app-sidebar .mantine-NavLink-children { border-inline-start: 1px solid var(--color-border-primary); margin-inline-start: var(--space-md); padding-inline-start: var(--space-sm); }
