/* 🎭 تخصيصات مانتين محسّنة - Enhanced Mantine Customizations */

/* =================================
   ⭐ إعادة تعيين متغيرات مانتين الأساسية
   ================================= */

:root {
  /* الألوان الأساسية - مركزية بالكامل */
  --mantine-color-blue: var(--color-primary);  /* الأزرق الأساسي */
  --mantine-color-green: var(--color-success);  /* الأخضر الثانوي */
  --mantine-color-orange: var(--color-warning);  /* البرتقالي المميز */
  --mantine-color-red: var(--color-error);  /* الأحمر للخطر */
  --mantine-color-yellow: var(--color-warning);  /* الأصفر للتحذير */
  
  /* ربط ألوان النصوص المباشرة بالتوكنز المركزية */
  --mantine-color-dimmed: var(--color-text-secondary);  /* النص الثانوي */
  --mantine-color-gray: var(--color-text-secondary);    /* الرمادي = ثانوي */
  --mantine-color-dark: var(--color-text-primary);      /* الأسود = أساسي */
  
  /* الخط الأساسي */
  --mantine-font-family: var(--font-primary);  /* خط من التوكنز */
  --mantine-font-size-xs: var(--fs-xs);  /* حجم صغير جداً */
  --mantine-font-size-sm: var(--fs-sm);  /* حجم صغير */
  --mantine-font-size-md: var(--fs-md);  /* حجم متوسط */
  --mantine-font-size-lg: var(--fs-lg);  /* حجم كبير */
  --mantine-font-size-xl: var(--fs-xl);  /* حجم كبير جداً */
  
  /* المسافات والأبعاد */
  --mantine-spacing-xs: var(--space-xs);  /* مسافة صغيرة 8px */
  --mantine-spacing-sm: var(--space-sm);  /* مسافة متوسطة 16px */
  --mantine-spacing-md: var(--space-md);  /* مسافة أساسية 24px */
  --mantine-spacing-lg: var(--space-lg);  /* مسافة متوسطة كبيرة 32px */
  --mantine-spacing-xl: var(--space-xl);  /* مسافة كبيرة 48px */
  
  /* الزوايا الدائرية */
  --mantine-radius-xs: var(--radius-sm);  /* زوايا صغيرة */
  --mantine-radius-sm: var(--radius-sm);  /* زوايا صغيرة */
  --mantine-radius-md: var(--radius-md);  /* زوايا أساسية */
  --mantine-radius-lg: var(--radius-lg);  /* زوايا كبيرة */
  --mantine-radius-xl: var(--radius-lg);  /* زوايا كبيرة جداً */
  
  /* نقاط الكسر - إجبارية مطلقة لتجاوز Mantine */
  --mantine-breakpoint-xs: 0px !important;      /* أقل من sm */
  --mantine-breakpoint-sm: var(--bp-sm) !important;    /* الهواتف الحقيقية */
  --mantine-breakpoint-md: var(--bp-mobile) !important;    /* الهواتف الكبيرة - موحد مع tokens.css */
  --mantine-breakpoint-lg: var(--bp-tablet) !important;    /* التابلت - موحد مع tokens.css */
  --mantine-breakpoint-xl: var(--bp-desktop) !important;   /* اللابتوب - موحد مع tokens.css */
  --mantine-breakpoint-sm-value: var(--bp-sm);
  --mantine-breakpoint-md-value: var(--bp-mobile);
  --mantine-breakpoint-lg-value: var(--bp-tablet);
  --mantine-breakpoint-xl-value: var(--bp-desktop);
}

/* =================================
   ⭐ تخصيص الأزرار لمانتين
   ================================= */

/* إعادة تعيين أزرار مانتين */
.mantine-Button-root {
  font-family: var(--mantine-font-family);  /* خط دبي */
  font-weight: var(--font-weight-medium);  /* وزن متوسط موحد */
  border-radius: var(--radius-md);  /* زوايا أساسية */
  transition: all 0.2s ease;  /* انتقال سلس */
}

/* زر أساسي - أزرق */
.mantine-Button-root[data-variant="filled"] {
  background-color: var(--color-primary);  /* خلفية زرقاء */
  color: var(--color-text-inverse);  /* نص أبيض */
  border: none;  /* بلا حد */
}

.mantine-Button-root[data-variant="filled"]:hover {
  background-color: var(--color-primary-hover);  /* أزرق أغمق عند التمرير */
  transform: translateY(-1px);  /* رفع بسيط */
}

/* زر ثانوي - أخضر */
.mantine-Button-root[data-variant="outline"] {
  background-color: transparent;  /* خلفية شفافة */
  color: var(--color-success);  /* نص أخضر */
  border: 1px solid var(--color-success);  /* حد أخضر */
}

.mantine-Button-root[data-variant="outline"]:hover {
  background-color: var(--color-success);  /* خلفية خضراء عند التمرير */
  color: var(--color-text-inverse);  /* نص أبيض */
}

/* =================================
   ⭐ تخصيص الحقول لمانتين  
   ================================= */

/* إعادة تعيين حقول الإدخال */
.mantine-Input-wrapper {
  margin-bottom: var(--space-sm);  /* مسافة سفلية */
}

.mantine-Input-input {
  font-family: var(--mantine-font-family);  /* خط دبي */
  font-size: var(--fs-md);  /* حجم أساسي */
  border: 1px solid var(--color-border-primary);  /* حد رمادي */
  border-radius: var(--radius-md);  /* زوايا أساسية */
  padding: var(--space-sm);  /* حشو صغير */
  transition: border-color 0.2s ease;  /* انتقال سلس للحد */
}

.mantine-Input-input:focus {
  border-color: var(--color-primary);  /* حد أزرق عند التركيز */
  outline: none;  /* إزالة المحيط الافتراضي */
  box-shadow: var(--shadow-sm);  /* ظل خفيف */
}

/* تسميات الحقول */
.mantine-Input-label {
  font-family: var(--mantine-font-family);  /* خط دبي */
  font-weight: var(--font-weight-medium);  /* وزن متوسط موحد */
  color: var(--color-text-primary);  /* لون أساسي */
  margin-bottom: var(--space-xs);  /* مسافة سفلية صغيرة */
  display: block;  /* عرض مكتلي */
}

/* =================================
   ⭐ تطبيق الألوان المركزية على مكونات Mantine
   ================================= */

/* ربط كل النصوص الثانوية بالتوكنز المركزية */
/* الافتراضي للنصوص يكون Secondary حتى يظهر السرد بوضوح */
.mantine-Text-root {
  color: var(--color-text-secondary);
}

/* النصوص الثانوية من التوكنز */
.mantine-Text-root[data-c*="dimmed"],
.mantine-Text-root[c*="dimmed"],
*[data-c*="dimmed"],
*[c*="dimmed"] {
  color: var(--color-text-secondary) !important;
}

/* الألوان الرمادية من التوكنز */
*[data-color*="gray"],
*[color*="gray"] {
  color: var(--color-text-secondary) !important;
}

/* Badge وActionIcon colors */
.mantine-Badge-root[data-color="gray"],
.mantine-ActionIcon-root[data-color="gray"] {
  color: var(--color-text-secondary) !important;
  background-color: var(--color-bg-tertiary) !important;
}

/* Alert colors */
.mantine-Alert-root[data-color="gray"] {
  background-color: var(--color-bg-secondary) !important;
  color: var(--color-text-secondary) !important;
  border-color: var(--color-border-primary) !important;
}

/* تطبيق عام لكل النصوص في مكونات Mantine */
.mantine-Text-root,
.mantine-Title-root {
  color: inherit; /* وراثة اللون من الحاوي */
}

/* تطبيق الألوان الثانوية على كل العناصر */
*[data-c="dimmed"],
*[c="dimmed"] {
  color: var(--color-text-secondary) !important;
}

/* إجبار كل النصوص على استخدام التوكنز - قوانين شاملة */
/* تعطيل إجبار النص الأساسي داخل الحاويات للسماح لقواعد UiProviders بالتحكم */
/* .mantine-Card-root .mantine-Text-root:not([c]):not([data-c]),
.mantine-Stack-root .mantine-Text-root:not([c]):not([data-c]),
.mantine-Group-root .mantine-Text-root:not([c]):not([data-c]) { color: var(--color-text-primary) !important; } */

/* النصوص الثانوية - أولوية عالية */
.mantine-Text-root[c="dimmed"],
.mantine-Text-root[data-c="dimmed"],
*[c="dimmed"],
*[data-c="dimmed"] {
  color: var(--color-text-secondary) !important;
}

/* تطبيق عام على كل النصوص */
:is(.mantine-Text-root, .mantine-Title-root, .mantine-Badge-root) {
  color: inherit;
}

/* النصوص بدون تحديد لون = أساسي */
/* إزالة الإجبار العام للون الأساسي حتى تعمل قواعد Title/Text من الثيم */
/* :is(.mantine-Text-root, .mantine-Title-root):not([c]):not([data-c]):not([color]):not([data-color]) { color: var(--color-text-primary) !important; } */

/* =================================
   ⭐ تخصيص البطاقات لمانتين
   ================================= */

/* إعادة تعيين بطاقات مانتين */
.mantine-Card-root {
  background-color: var(--color-bg-secondary);  /* خلفية ثانوية للبطاقات - صحيح */
  border: 1px solid var(--color-border-primary);  /* حد رمادي */
  border-radius: var(--radius-md);  /* زوايا متوسطة */
  padding: var(--space-lg);  /* حشو كبير */
  box-shadow: var(--shadow-sm);  /* ظل خفيف */
  transition: box-shadow 0.3s ease;  /* انتقال سلس للظل */
}

.mantine-Card-root:hover {
  box-shadow: var(--shadow-md);  /* ظل متوسط عند التمرير */
}

/* عنوان البطاقة */
.mantine-Card-root .mantine-Title-root {
  font-family: var(--mantine-font-family);  /* خط دبي */
  color: inherit;  /* اتباع قواعد Title في الثيم */
  margin-bottom: var(--space-sm);  /* مسافة سفلية */
}

/* =================================
   ⭐ تخصيص القوائم لمانتين
   ================================= */

/* إعادة تعيين قوائم مانتين */
.mantine-Menu-dropdown {
  background-color: var(--color-bg-primary);  /* خلفية أساسية */
  border: 1px solid var(--color-border-primary);  /* حد رمادي */
  border-radius: var(--radius-md);  /* زوايا متوسطة */
  box-shadow: var(--shadow-md);  /* ظل متوسط */
  padding: var(--space-xs);  /* حشو صغير */
}

.mantine-Menu-item {
  font-family: var(--mantine-font-family);  /* خط دبي */
  padding: var(--space-xs) var(--space-sm);  /* حشو صغير */
  border-radius: var(--radius-sm);  /* زوايا صغيرة */
  transition: background-color 0.2s ease;  /* انتقال سلس */
}

.mantine-Menu-item:hover {
  background-color: var(--color-bg-secondary);  /* خلفية ثانوية عند التمرير */
}

/* =================================
   ⭐ تخصيص الجداول لمانتين
   ================================= */

/* إعادة تعيين جداول مانتين */
.mantine-Table-root {
  width: 100%;  /* افتراضي: عرض كامل */
  border-collapse: collapse;  /* انهيار الحدود */
  font-family: var(--mantine-font-family);  /* خط دبي */
}

/* عندما نريد أن يعتمد عرض الجدول على المحتوى (أطول سطر)، نستخدم data-fit="content" على الحاوي */
/* نمط المحتوى: اجعل الجدول يأخذ عرض المحتوى فعلياً، واجعل البطاقة تتقلص وفقاً له عندما تسمح المساحة */
.mantine-Card-root[data-fit="content"] :is(table, .mantine-Table-table),
.mantine-Stack-root[data-fit="content"] :is(table, .mantine-Table-table),
.mantine-Group-root[data-fit="content"] :is(table, .mantine-Table-table) {
  width: max-content;            /* عرض الجدول = عرض المحتوى */
  table-layout: auto;            /* حساب أعمدة ديناميكي حسب المحتوى */
}

/* على الشاشات المتوسطة والكبيرة: اسمح للبطاقة أن تنكمش حول الجدول عندما نفعّل fit=content */
@media (min-width: 1024px) {
  .mantine-Card-root[data-fit="content"],
  .mantine-Stack-root[data-fit="content"],
  .mantine-Group-root[data-fit="content"] {
    width: max-content;          /* تتقلص بقدر المحتوى */
    max-width: 100%;             /* لا تتجاوز الشبكة */
  }
}

.mantine-Table-root th {
  background-color: var(--color-bg-secondary);  /* خلفية ثانوية للرؤوس */
  padding: var(--space-sm);  /* حشو صغير */
  text-align: center;  /* محاذاة وسط أفقياً */
  vertical-align: middle; /* محاذاة وسط عمودياً */
  font-weight: var(--font-weight-bold);  /* وزن عريض موحد */
  border-bottom: 2px solid var(--color-border-primary);  /* حد سفلي */
}

.mantine-Table-root td {
  padding: var(--space-sm);  /* حشو صغير */
  border-bottom: 1px solid var(--color-border-primary);  /* حد سفلي خفيف */
  text-align: center;  /* محاذاة وسط أفقياً */
  vertical-align: middle; /* محاذاة وسط عمودياً */
}

/* تقليل الحشو على مستوى الحاوي بدون إضافة توكنز جديدة */
.mantine-Card-root[data-compact="true"] .mantine-Table-root :is(th, td),
.mantine-Stack-root[data-compact="true"] .mantine-Table-root :is(th, td),
.mantine-Group-root[data-compact="true"] .mantine-Table-root :is(th, td) {
  padding-block: var(--space-xs); /* عمودي أقل */
  padding-inline: var(--space-sm); /* أفقي قليل ثابت */
}

.mantine-Table-root tr:hover {
  background-color: var(--color-bg-tertiary);  /* خلفية ثلاثية عند التمرير */
}

/* ===== استجابة الموبايل لمحتوى واسع (مفعّل عبر data-responsive="wide" على البطاقة/الحاوية) ===== */
/* ملاحظة: بعض المتصفحات لا تدعم var() داخل media، لذا نستخدم 640px كحد عملي مطابق لقيمة --bp-mobile */
@media (max-width: 640px) {
  /* التفاف سكرول أفقي تلقائي للبطاقة الحاوية */
  .mantine-Card-root[data-responsive="wide"],
  .mantine-Stack-root[data-responsive="wide"],
  .mantine-Group-root[data-responsive="wide"] {
  overflow-x: auto;
    overscroll-behavior-x: contain;
    -webkit-overflow-scrolling: touch;
  display: block; /* حتى يأخذ سكرول أفقي بوضوح */
  max-width: 100%;
  }

  /* بعض تراكيب Mantine تضع table داخل wrapper بعرض 100%، نفك هذا القيد في وضع wide */
  .mantine-Card-root[data-responsive="wide"] .mantine-Table-root,
  .mantine-Stack-root[data-responsive="wide"] .mantine-Table-root,
  .mantine-Group-root[data-responsive="wide"] .mantine-Table-root {
    width: auto !important;
    max-width: none !important;
  }

  /* الجدول يأخذ عرضاً أدنى موحداً ويتمدّد حسب المحتوى بدل الانضغاط */
  .mantine-Card-root[data-responsive="wide"] :is(table, .mantine-Table-table),
  .mantine-Stack-root[data-responsive="wide"] :is(table, .mantine-Table-table),
  .mantine-Group-root[data-responsive="wide"] :is(table, .mantine-Table-table) {
    width: max-content !important;          /* عرض على قدّ المحتوى فقط */
    table-layout: auto !important;          /* قياس أعمدة ديناميكي */
    display: inline-table;                  /* انكماش موثوق على Safari iOS */
  }

  /* تفعيل min-width الموحد اختياريًا فقط عند الحاجة عبر data-wide-min="true" */
  .mantine-Card-root[data-responsive="wide"][data-wide-min="true"] :is(table, .mantine-Table-table),
  .mantine-Stack-root[data-responsive="wide"][data-wide-min="true"] :is(table, .mantine-Table-table),
  .mantine-Group-root[data-responsive="wide"][data-wide-min="true"] :is(table, .mantine-Table-table) {
    min-width: var(--wide-content-min-w-sm) !important;
  }

  /* نفس قواعد عدم اللفّ والتنسيق العددي للـ th حتى لا يفرض الهيدر عرض مختلف */
  .mantine-Table-root th[data-cell="num"],
  .mantine-Table-root th[data-cell="date"] {
    white-space: nowrap;
    direction: ltr;
    unicode-bidi: isolate;
    font-variant-numeric: tabular-nums;
  }

  .mantine-Table-root td[data-cell="num"],
  .mantine-Table-root td[data-cell="date"],
  .mantine-Table-root td[data-cell="id"],
  .mantine-Table-root td[data-cell="code"] {
  white-space: nowrap;
    direction: ltr;
    unicode-bidi: isolate;
    font-variant-numeric: tabular-nums;
  }

  /* توزيع ذكي للأعمدة بالموبايل: أرقام/تواريخ تصير أعرضتها أقل، والكود/المعرّف يكبر حسب المحتوى */
  .mantine-Table-root td[data-cell="num"],
  .mantine-Table-root td[data-cell="date"],
  .mantine-Table-root th[data-cell="num"],
  .mantine-Table-root th[data-cell="date"] {
    width: 1% !important;           /* أعمدة ضيّقة جداً، تاخذ أقل شي */
    max-width: 1% !important;
  }

  .mantine-Table-root td[data-cell="id"],
  .mantine-Table-root td[data-cell="code"],
  .mantine-Table-root th[data-cell="id"],
  .mantine-Table-root th[data-cell="code"] {
    width: max-content !important;   /* تاخذ على قد النص */
    max-width: none !important;
  }

  /* افتراض عام للجداول الواسعة بالموبايل: منع اللفّ لكل الخلايا حتى يتكوّن عرض زائد = سكرول أفقي */
  .mantine-Card-root[data-responsive="wide"] .mantine-Table-root :is(th, td),
  .mantine-Stack-root[data-responsive="wide"] .mantine-Table-root :is(th, td),
  .mantine-Group-root[data-responsive="wide"] .mantine-Table-root :is(th, td) {
    white-space: nowrap !important;
  }

  /* صفوف أكثر كثافة */
  .mantine-Table-root.m-row-tight th,
  .mantine-Table-root.m-row-tight td {
    line-height: var(--line-height-tight);
    padding-block: var(--space-xs);
  }
}

/* =================================
   ⭐ تخصيص الإشعارات لمانتين
   ================================= */

/* إعادة تعيين إشعارات مانتين */
.mantine-Notification-root {
  background-color: var(--color-bg-primary);  /* خلفية أساسية */
  border: 1px solid var(--color-border-primary);  /* حد رمادي */
  border-radius: var(--radius-md);  /* زوايا متوسطة */
  box-shadow: var(--shadow-md);  /* ظل متوسط */
  padding: var(--space-lg);  /* حشو كبير */
  font-family: var(--mantine-font-family);  /* خط دبي */
}

/* إشعار نجاح - أخضر */
.mantine-Notification-root[data-variant="success"] {
  border-left: 4px solid var(--color-success);  /* حد يساري أخضر */
}

/* إشعار خطأ - أحمر */
.mantine-Notification-root[data-variant="error"] {
  border-left: 4px solid var(--color-error);  /* حد يساري أحمر */
}

/* إشعار تحذير - أصفر */
.mantine-Notification-root[data-variant="warning"] {
  border-left: 4px solid var(--color-warning);  /* حد يساري أصفر */
}

/* =================================
   ⭐ تخصيص النماذج لمانتين
   ================================= */

/* إعادة تعيين نماذج مانتين */
.mantine-Modal-root .mantine-Modal-content {
  background-color: var(--color-bg-primary);  /* خلفية أساسية */
  border-radius: var(--radius-lg);  /* زوايا كبيرة */
  box-shadow: var(--shadow-lg);  /* ظل كبير */
  padding: var(--space-xl);  /* حشو كبير جداً */
  font-family: var(--mantine-font-family);  /* خط دبي */
}

.mantine-Modal-root .mantine-Modal-header {
  border-bottom: 1px solid var(--color-border-primary);  /* حد سفلي */
  padding-bottom: var(--space-sm);  /* حشو سفلي صغير */
  margin-bottom: var(--space-md);  /* مسافة سفلية متوسطة */
}

.mantine-Modal-root .mantine-Modal-title {
  font-family: var(--mantine-font-family);  /* خط دبي */
  font-weight: var(--font-weight-bold);  /* وزن عريض موحد */
  color: var(--color-text-primary);  /* لون أساسي */
}

/* =================================
   ⭐ تصحيح Grid و Responsive للهواتف
   ================================= */

/* إجبار استخدام البريك بوينت المركزية في كل مكونات Mantine */
@media (max-width: 430px) {
  /* الهواتف الصغيرة - حد sm */
  .mantine-Grid-root .mantine-Grid-col[data-span="6"],
  .mantine-Grid-root .mantine-Grid-col[data-span="4"],
  .mantine-Grid-root .mantine-Grid-col[data-span="3"] {
    flex: 0 0 100% !important;
    max-width: 100% !important;
  }
}

@media (max-width: 640px) {
  /* كل الهواتف */
  .mantine-Grid-root .mantine-Grid-col {
    flex: 0 0 100% !important;
    max-width: 100% !important;
    margin-bottom: var(--space-md);
  }
}

@media (min-width: 431px) {
  /* الشاشات الأكبر من الهواتف - أكبر من sm */
  /* التحكم بزر البرجر يُدار عبر كلاسات Tailwind في JSX (block md:hidden) */
}

/* =================================
   ⭐ اتجاه النص للعربية
   ================================= */

/* تطبيق الاتجاه العربي على مكونات مانتين */
.mantine-Input-input,
.mantine-Textarea-input,
.mantine-Select-input {
  direction: rtl;  /* اتجاه من اليمين لليسار */
  text-align: right;  /* محاذاة يمينية */
}

.mantine-Table-root th,
.mantine-Table-root td {
  direction: rtl;  /* اتجاه عربي للجداول */
}

/* محاذاة وسط إجبارية لتجاوز أنماط Mantine الافتراضية عند اختلاف ترتيب التحميل */
.mantine-Table-root :is(th, td) {
  text-align: center !important;
  vertical-align: middle !important;
}

/* =================================
   ⭐ تخصيص NavLink للسايدبار (مركزي وتحت نطاق .app-sidebar)
   الهدف: نص ياخذ كامل العرض، بدون التفاف، وبدون حافة داخلية زائدة
   ملاحظة: نستخدم التوكنز فقط، بدون قيم صلبة
   ================================= */

.app-sidebar .mantine-NavLink-root { /* عنصر الرابط الأساسي في السايدبار */
  padding-inline: 0 !important; /* إلغاء الحشو الأفقي حتى ما تصير حافتين */
  padding-block: var(--space-md); /* تقليل الحشو العمودي لزيادة الكثافة */
  text-align: right; /* محاذاة يمين للـ RTL */
  border-radius: var(--radius-md); /* زوايا ناعمة */
  transition: background-color .15s ease, color .15s ease, box-shadow .15s ease; /* انتقال ناعم */
}

/* تمييز ناعم يعمل بالفاتح والداكن عبر مزج اللون الأساسي مع خلفية الصفحة */
.app-sidebar .mantine-NavLink-root:hover,
.app-sidebar .mantine-NavLink-root:focus-visible {
  background-color: color-mix(in oklab, var(--color-primary) 30%, var(--color-bg-secondary));
  /* مسافة بسيطة من جهة البداية حتى يتنفس النص أثناء التحديد */
  padding-inline-start: var(--space-sm);
}

/* حالة مفعلة أو الصفحة الحالية: تمييز أقوى وحد داخلي خفيف */
.app-sidebar .mantine-NavLink-root[aria-current="page"],
.app-sidebar .mantine-NavLink-root[data-active="true"] {
  background-color: color-mix(in oklab, var(--color-primary) 30%, var(--color-bg-secondary));
  box-shadow: inset 0 0 0 1px var(--color-border-primary);
  /* نفس التنفّس من جهة البداية لحالة التفعيل */
  padding-inline-start: var(--space-sm);
}

/* =================================
   ⭐ هيكل التطبيق الموحد (بديل shell.css) تحت .app-shell
   الهدف: توحيد التخطيط لكل الأدوار بدون استخدام depth-shell
   ================================= */

.app-shell { /* شبكة رئيسية */
  display: grid; /* شبكة */
  grid-template-areas: "header header" "sidebar main"; /* مناطق */
  grid-template-columns: var(--sidebar-width) 1fr; /* عمود سايدبار + محتوى */
  grid-template-rows: var(--header-height) 1fr; /* هيدر ثابت */
  height: 100dvh; /* تثبيت الإطار بكامل الشاشة */
  overflow: hidden; /* التمرير محصور داخل aside/main */
  background-color: var(--color-bg-primary); /* خلفية */
}

.app-header { /* رأس موحّد */
  grid-area: header; /* منطقة الهيدر */
  display: flex; align-items: center; justify-content: space-between; /* توزيع */
  padding: 0 var(--space-md); /* تقليل الحشو الجانبي للاقتراب من الحواف */
  background-color: var(--color-bg-secondary); /* خلفية */
  border-bottom: 1px solid var(--color-border-primary); /* حد */
  z-index: var(--z-fixed); height: var(--header-height); /* طبقة وارتفاع */
}

/* شعار التطبيق ضمن الهيدر - يعتمد التوكنز */
.app-logo { height: var(--fs-lg); width: auto; display: block; }

.app-sidebar { /* سايدبار موحّد */
  grid-area: sidebar; /* منطقة */
  padding: var(--space-md) var(--space-md) var(--space-lg); /* حشو */
  background-color: var(--color-bg-secondary); /* خلفية */
  border-inline-end: 1px solid var(--color-border-primary); /* حد منطقي */
  overflow-y: auto; scrollbar-width: thin; /* تمرير */
}

.app-main { /* محتوى رئيسي */
  grid-area: main; padding: var(--space-lg); background-color: var(--color-bg-primary); overflow-y: auto; min-height: 0; /* منع مشاكل التمرير */
}

/* موبايل: السايدبار كـ overlay يفتح من جهة النهاية (RTL-ready) */
@media (max-width: 640px) {
  /* تقليل حشو الهيدر أكثر بالموبايل للاقتراب من الحواف */
  .app-header { padding-inline: var(--space-sm); }
  .app-header .header-nav, .app-header .header-actions { gap: var(--space-sm); min-inline-size: 0; }
  .app-header .header-nav > * { min-width: 0; }

  .app-shell { grid-template-areas: "header" "main"; grid-template-columns: 1fr; grid-template-rows: var(--header-height) 1fr; height: 100dvh; overflow: hidden; }
  .app-shell .app-main { padding: var(--space-md); min-height: calc(100dvh - var(--header-height)); width: 100%; overflow-x: hidden; }
  /* إخفاء السايدبار المكتبي بالموبايل (نعتمد overlay فقط) */
  .app-shell > .app-sidebar { display: none; }
}

/* طبقات overlay للموبايل (مُدارة من React state داخل AppShell.tsx)
  ملاحظة: تغطي المحتوى الرئيسي فقط (تحت الهيدر) ولا تغطي الهيدر */
.mobile-overlay { position: fixed; top: var(--header-height); inset-inline: 0; bottom: 0; background: rgba(0,0,0,0.3); z-index: var(--z-fixed); }
.mobile-sidebar { position: fixed; top: var(--header-height); inset-inline-start: 0; width: var(--sidebar-width); height: calc(100dvh - var(--header-height)); background-color: var(--color-bg-secondary); border-inline-start: 1px solid var(--color-border-primary); box-shadow: var(--shadow-lg); }

.app-sidebar .mantine-NavLink-body { /* حاوية نص الرابط */
  flex: 1 1 auto; /* السماح للنص يتمدّد وياخذ المساحة */
  min-width: 0; /* ضروري لتفعيل ellipsis مع overflow */
}

.app-sidebar .mantine-NavLink-label { /* النص/العنوان نفسه */
  display: block; /* نخليها block حتى width يشتغل */
  width: 100%; /* النص ياخذ كل العرض المتاح */
  white-space: nowrap; /* منع التفاف الكلمات فوق بعض */
  overflow: hidden; /* إخفاء الزيادة لو ضاق المكان */
  text-overflow: ellipsis; /* عرض نقاط ثلاثية بدل اللف */
}

.app-sidebar .mantine-NavLink-section:first-child { /* قسم الأيقونة يمين */
  margin-inline-end: var(--space-xs); /* مسافة أصغر لشد العناصر */
}

.app-sidebar .mantine-NavLink-section:last-child { /* قسم الشيفرون يسار */
  margin-inline-start: var(--space-sm); /* مسافة أصغر لشد العناصر */
}

.app-sidebar .mantine-NavLink-children { /* حاوية العناصر الفرعية */
  border-inline-start: 1px solid var(--color-border-primary); /* خط ارشادي عمودي خفيف */
  margin-inline-start: var(--space-md); /* إزاحة أخف للاستفادة من العرض */
  padding-inline-start: var(--space-sm); /* حشو داخلي أخف للـchildren */
}
