/* 🎭 تخصيصات مانتين محسّنة - Enhanced Mantine Customizations */

/* =================================
   ⭐ إعادة تعيين متغيرات مانتين الأساسية
   ================================= */

/* تُدار قيم Mantine المتغيرة عبر الثيم داخل UiProviders.tsx. نُبقي هذا الملف لسلوكيات مركبة واستجابة واجهات فقط. */

/* =================================
   ⭐ تخصيص الأزرار لمانتين
   ================================= */

/* إعادة تعيين أزرار مانتين */
/* تخصيص الأزرار يُدار بالكامل من Mantine Theme داخل UiProviders.tsx */

/* =================================
   ⭐ تخصيص الحقول لمانتين  
   ================================= */

/* إعادة تعيين حقول الإدخال */
/* نقلت تخصيصات Input إلى: styles/03-mantine/overrides/input.css */

/* =================================
   ⭐ تطبيق الألوان المركزية على مكونات Mantine
   ================================= */

/* ألوان الحالات (dimmed/gray) تُدار من Mantine Theme داخل UiProviders.tsx */

/* إجبار كل النصوص على استخدام التوكنز - قوانين شاملة */
/* تعطيل إجبار النص الأساسي داخل الحاويات للسماح لقواعد UiProviders بالتحكم */
/* .mantine-Card-root .mantine-Text-root:not([c]):not([data-c]),
.mantine-Stack-root .mantine-Text-root:not([c]):not([data-c]),
.mantine-Group-root .mantine-Text-root:not([c]):not([data-c]) { color: var(--color-text-primary) !important; } */
/* نقلت تخصيصات Table إلى: styles/03-mantine/overrides/table.css */

/* =================================
   ⭐ تخصيص الإشعارات لمانتين
   ================================= */

/* إعادة تعيين إشعارات مانتين */
/* نقلت تخصيصات Notifications إلى: styles/03-mantine/overrides/notifications.css */

/* =================================
   ⭐ تخصيص النماذج لمانتين
   ================================= */

/* إعادة تعيين نماذج مانتين */
/* نقلت تخصيصات Modal إلى: styles/03-mantine/overrides/modal.css */

/* =================================
   ⭐ تصحيح Grid و Responsive للهواتف
   ================================= */

/* إجبار استخدام البريك بوينت المركزية في كل مكونات Mantine */
/* نقلت responsive Grid helpers إلى: styles/03-mantine/overrides/responsive.css */

@media (min-width: 431px) {
  /* الشاشات الأكبر من الهواتف - أكبر من sm */
  /* التحكم بزر البرجر يُدار عبر كلاسات Tailwind في JSX (block sm:hidden) لمطابقة 640px */
}

/* =================================
   ⭐ اتجاه النص للعربية
   ================================= */

/* تطبيق الاتجاه العربي على مكونات مانتين */
/* نقلت إصلاحات RTL إلى: styles/03-mantine/overrides/rtl.css */

/* =================================
   ⭐ تخصيص NavLink للسايدبار (مركزي وتحت نطاق .app-sidebar)
   الهدف: نص ياخذ كامل العرض، بدون التفاف، وبدون حافة داخلية زائدة
   ملاحظة: نستخدم التوكنز فقط، بدون قيم صلبة
   ================================= */

.app-sidebar .mantine-NavLink-root { /* عنصر الرابط الأساسي في السايدبار */
  padding-inline: 0 !important; /* إلغاء الحشو الأفقي حتى ما تصير حافتين */
  padding-block: var(--space-md); /* تقليل الحشو العمودي لزيادة الكثافة */
  text-align: right; /* محاذاة يمين للـ RTL */
  border-radius: var(--radius-md); /* زوايا ناعمة */
  transition: background-color .15s ease, color .15s ease, box-shadow .15s ease; /* انتقال ناعم */
}

/* تمييز ناعم يعمل بالفاتح والداكن عبر مزج اللون الأساسي مع خلفية الصفحة */
.app-sidebar .mantine-NavLink-root:hover,
.app-sidebar .mantine-NavLink-root:focus-visible {
  background-color: color-mix(in oklab, var(--color-primary) 30%, var(--color-bg-secondary));
  /* مسافة بسيطة من جهة البداية حتى يتنفس النص أثناء التحديد */
  padding-inline-start: var(--space-sm);
}

/* حالة مفعلة أو الصفحة الحالية: تمييز أقوى وحد داخلي خفيف */
.app-sidebar .mantine-NavLink-root[aria-current="page"],
.app-sidebar .mantine-NavLink-root[data-active="true"] {
  background-color: color-mix(in oklab, var(--color-primary) 30%, var(--color-bg-secondary));
  box-shadow: inset 0 0 0 1px var(--color-border-primary);
  /* نفس التنفّس من جهة البداية لحالة التفعيل */
  padding-inline-start: var(--space-sm);
}

/* =================================
   ⭐ هيكل التطبيق الموحد (بديل shell.css) تحت .app-shell
   الهدف: توحيد التخطيط لكل الأدوار بدون استخدام depth-shell
   ================================= */

.app-shell { /* شبكة رئيسية */
  display: grid; /* شبكة */
  grid-template-areas: "header header" "sidebar main"; /* مناطق */
  grid-template-columns: var(--sidebar-width) 1fr; /* عمود سايدبار + محتوى */
  grid-template-rows: var(--header-height) 1fr; /* هيدر ثابت */
  height: 100dvh; /* تثبيت الإطار بكامل الشاشة */
  overflow: hidden; /* التمرير محصور داخل aside/main */
  background-color: var(--color-bg-primary); /* خلفية */
}

.app-header { /* رأس موحّد */
  grid-area: header; /* منطقة الهيدر */
  display: flex; align-items: center; justify-content: space-between; /* توزيع */
  padding: 0 var(--space-md); /* تقليل الحشو الجانبي للاقتراب من الحواف */
  background-color: var(--color-bg-secondary); /* خلفية */
  border-bottom: 1px solid var(--color-border-primary); /* حد */
  z-index: var(--z-fixed); height: var(--header-height); /* طبقة وارتفاع */
}

/* شعار التطبيق ضمن الهيدر - يعتمد التوكنز */
.app-logo { height: var(--fs-lg); width: auto; display: block; }

/* داكن فقط: خلي الشعار يطلع بلون فاتح (يعادل text-inverse) بدون تغيير ملف التوكنز أو الـ SVG */
[data-mantine-color-scheme="dark"] .app-header .app-logo {
  filter: brightness(0) invert(1); /* يحوّل الألوان الداكنة إلى فاتحة */
}

.app-sidebar { /* سايدبار موحّد */
  grid-area: sidebar; /* منطقة */
  padding: var(--space-md) var(--space-md) var(--space-lg); /* حشو */
  background-color: var(--color-bg-secondary); /* خلفية */
  border-inline-end: 1px solid var(--color-border-primary); /* حد منطقي */
  overflow-y: auto; scrollbar-width: thin; /* تمرير */
}

.app-main { /* محتوى رئيسي */
  grid-area: main; padding: var(--space-lg); background-color: var(--color-bg-primary); overflow-y: auto; min-height: 0; /* منع مشاكل التمرير */
}

/* موبايل: السايدبار كـ overlay يفتح من جهة النهاية (RTL-ready) */
@media (max-width: 640px) {
  /* تقليل حشو الهيدر أكثر بالموبايل للاقتراب من الحواف */
  .app-header { padding-inline: var(--space-sm); }
  .app-header .header-nav, .app-header .header-actions { gap: var(--space-sm); min-inline-size: 0; }
  .app-header .header-nav > * { min-width: 0; }

  .app-shell { grid-template-areas: "header" "main"; grid-template-columns: 1fr; grid-template-rows: var(--header-height) 1fr; height: 100dvh; overflow: hidden; }
  .app-shell .app-main {
    padding-inline: calc(var(--space-sm) + var(--space-xs)); /* زيادة طفيفة للحافة الجانبية */
    padding-block: var(--space-sm);
    min-height: calc(100dvh - var(--header-height));
    width: 100%;
    overflow-x: hidden;
  }
  /* إخفاء السايدبار بالموبايل يُدار الآن بواسطة Tailwind utility: hidden mobile:block */

  /* سايدبار الموبايل: حشو موحّد وصغير من كل الجهات */
  .mobile-sidebar {
    padding: var(--space-sm) !important;
    /* تقليل العرض للموبايل لكل الأدوار بدون المساس بـ tokens.css */
    width: min(
      calc(var(--sidebar-width) - var(--space-xl)),
      calc(100vw - var(--space-lg))
    ) !important;
  }

  /* تقليل كثافة عناصر الروابط داخل سايدبار الموبايل */
  .mobile-sidebar .mantine-NavLink-root {
    padding-block: var(--space-sm) !important;
  }

  /* إزالة الحشو الجانبي المكرر من أي Container داخل المحتوى بالموبايل */
  .app-main .mantine-Container-root {
    padding-inline: 0 !important; /* يعتمد الحشو من app-main فقط */
  }

  /* ===== ضبط الكثافة العمودية لكل الأدوار بالموبايل ===== */
  .app-main .mantine-Container-root .mantine-Stack-root { gap: var(--space-sm) !important; }
  .app-main .mantine-Container-root .mantine-Group-root { gap: var(--space-sm) !important; }
  .app-main .mantine-Container-root .mantine-Divider-root { margin-block: var(--space-sm) !important; }
  /* تقليل حشو بطاقات Mantine بالموبايل داخل كل الصفحات */
  .app-main .mantine-Container-root .mantine-Card-root { padding: var(--space-md) !important; }

  /* مسافة متساوية قبل التنبيه الأخير حتى ما يلتصق بالبطاقة التي قبله */
  .app-main .mantine-Container-root .mantine-Card-root + .mantine-Alert-root {
    margin-top: var(--space-md) !important;
  }

  /* حشو داخلي مخفف لمحتوى السايدبار بالموبايل */
  .mobile-sidebar .sidebar-inner { padding: var(--space-sm) !important; }
  /* على الديسكتوب نحافظ على الحشو الأكبر داخل السايدبار */
  .app-sidebar .sidebar-inner { padding-inline: var(--space-md); padding-block: var(--space-sm); }
}

/* طبقات overlay للموبايل (مُدارة من React state داخل AppShell.tsx)
  ملاحظة: تغطي المحتوى الرئيسي فقط (تحت الهيدر) ولا تغطي الهيدر */
.mobile-overlay { position: fixed; top: var(--header-height); inset-inline: 0; bottom: 0; background: var(--overlay-scrim); z-index: var(--z-fixed); }
.mobile-sidebar { position: fixed; top: var(--header-height); inset-inline-start: 0; width: var(--sidebar-width); height: calc(100dvh - var(--header-height)); background-color: var(--color-bg-secondary); border-inline-start: 1px solid var(--color-border-primary); box-shadow: var(--shadow-lg); }

.app-sidebar .mantine-NavLink-body { /* حاوية نص الرابط */
  flex: 1 1 auto; /* السماح للنص يتمدّد وياخذ المساحة */
  min-width: 0; /* ضروري لتفعيل ellipsis مع overflow */
}

.app-sidebar .mantine-NavLink-label { /* النص/العنوان نفسه */
  display: block; /* نخليها block حتى width يشتغل */
  width: 100%; /* النص ياخذ كل العرض المتاح */
  white-space: nowrap; /* منع التفاف الكلمات فوق بعض */
  overflow: hidden; /* إخفاء الزيادة لو ضاق المكان */
  text-overflow: ellipsis; /* عرض نقاط ثلاثية بدل اللف */
}

.app-sidebar .mantine-NavLink-section:first-child { /* قسم الأيقونة يمين */
  margin-inline-end: var(--space-xs); /* مسافة أصغر لشد العناصر */
}

.app-sidebar .mantine-NavLink-section:last-child { /* قسم الشيفرون يسار */
  margin-inline-start: var(--space-sm); /* مسافة أصغر لشد العناصر */
}

.app-sidebar .mantine-NavLink-children { /* حاوية العناصر الفرعية */
  border-inline-start: 1px solid var(--color-border-primary); /* خط ارشادي عمودي خفيف */
  margin-inline-start: var(--space-md); /* إزاحة أخف للاستفادة من العرض */
  padding-inline-start: var(--space-sm); /* حشو داخلي أخف للـchildren */
}
